<!DOCTYPE html>
<html>
    <head>
        <title>An Intro to GPG - tudor's blog</title>
        <meta charset="utf-8">

        <link rel="stylesheet" href="/blog/css/main.css">
        <link rel="stylesheet" href="/css/solarized-light.css">
    	<link rel="icon" href="/favicon.png">

        <script src="/js/highlight.pack.js"></script>
		<script>hljs.initHighlightingOnLoad();</script>
    </head>

    <body>
        <main>
            <header class="site-header">
                <h1 class="site-title">
                    <a href="/blog">tudor's blog</a>
                </h1>
            </header>
            <div class="post">
    <div class="post header">
        <h2>
            An Intro to GPG
            <small>the free alternative to PGP</small>
        </h2>
    </div>

    <div class="post content">
        <p><a href="https://www.gnupg.org/">GnuPG (GPG)</a> is a program that does two important things:</p>

<ol>
<li>encrypt/decrypt data so only people you know and trust are able to use it;</li>
<li>sign/verify files so you know if the data you received via email or any other
medium was sent to you by a person that you know and trust.</li>
</ol>

<p>GPG is the most popular implementation of the <a href="http://openpgp.org/">OpenPGP</a>
standard, because it&rsquo;s <a href="http://i.imgur.com/Brs9J9U.jpg">free as in freedom</a> and
because it&rsquo;s widely use by many projects to verify software and emails, <a href="https://www.kernel.org/signature.html">including the Linux Kernel</a>.</p>

<h3>Quick and easy GPG usage</h3>

<p>First, install it. In the Arch Linux repositories it&rsquo;s called <a href="https://www.archlinux.org/packages/core/x86_64/gnupg/"><code>gnupg</code></a>:</p>

<pre><code class="language-bash">sudo pacman -S gnupg
</code></pre>

<p>Now generate a <em>key pair</em>. After you complete this step you will get a <em>secret
key</em> and a <em>public key</em>. The secret key must be kept secret, otherwise there is
no point in using GPG. The public
key must be given to anyone who wishes to sign or encrypt data for you.</p>

<p>To generate the key pair:</p>

<pre><code class="language-bash">gpg --gen-key
</code></pre>

<p>You will be asked for your real name, your email addresses and a passphrase. Make sure that
the data you enter is correct and <strong>real</strong>.</p>

<p>The keys will be added to your <em>key ring</em>.</p>

<p>Next up, you need to export your public key in a shareable format, so others can
download and view it easily. PGP public keys are by default stored in binary. To
make them readable, you need to <em>armor</em> them.</p>

<p>To export an ASCII armored public key, first you need the id of your key pair.
To get it, first run:</p>

<pre><code class="language-bash">gpg --list-secret keys
</code></pre>

<p>My output looks like this:</p>

<pre><code>/home/tudurom/.gnupg/pubring.kbx
--------------------------------
sec   rsa2048 2016-12-17 [SC]
      58359B0A5EEF806EBCBCDFCE5AFEDD03CA5A1EA4
uid           [ultimate] Tudor Ioan Roman &lt;tudurom@gmail.com&gt;
ssb   rsa2048 2016-12-17 [E]
</code></pre>

<p>The key pair id is that last identifier next to <code>sec</code>. That&rsquo;s <code>58359B0A5EEF806EBCBCDFCE5AFEDD03CA5A1EA4</code> for me.</p>

<p>Next up, to export the ASCII armored public key, run:</p>

<pre><code class="language-bash">gpg --export --armor &lt;id&gt;
</code></pre>

<p>It should return something like:</p>

<pre><code>-----BEGIN PGP PUBLIC KEY BLOCK-----

mQENBFhVjCIBCACeXZg+7xqys/KQYV9bJhAm5/JMVxzHMLQgoZImcW2qMbBJCGEH
...blah blah skipping...
gpd1de2VA3RheUTzThuBbmyOk7+vo2w5fSyfc1+USDM=
=4HiE
-----END PGP PUBLIC KEY BLOCK-----
</code></pre>

<p>Congratulations, you now have your public key! Save it to a file and give it to
your friends or put it online (we will discuss about putting your key online
later in this article).</p>

<p>Let&rsquo;s say that your friend sent you your public key. How do you import it?</p>

<pre><code class="language-bash"># if the key is online in its own file
curl -sL http://pub.iotek.org/p/qSwl8V2 | gpg --import
# if the key is on your disk in its own file
gpg --import key.pub
</code></pre>

<p>Ok, you exchanged keys with your friend(s), now you&rsquo;re ready to sign and encrypt
files!</p>

<p>To sign files:</p>

<pre><code class="language-bash">gpg -o &lt;signed_file&gt; --sign &lt;file_to_be_signed&gt;
</code></pre>

<p>To encrypt files:</p>

<pre><code class="language-bash">gpg -o &lt;encrypted_file&gt; --encrypt --recipient &lt;recipient1&gt; --recipient
&lt;recipient2&gt; ... &lt;file_to_encrypt&gt;
</code></pre>

<p>Where <code>&lt;recipient&gt;</code> can be a public key id or an email address.</p>

<p>Suppose I am your friend and I sent you <a href="http://pub.iotek.org/p/DuV2LWH">this signed
file</a>. You can verify or get the original file
with the <code>--verify</code> or <code>--decrypt</code> commands.</p>

<pre><code class="language-bash">curl -sL http://pub.iotek.org/p/DuV2LWH | gpg -o cat.png --decrypt
curl -sL http://pub.iotek.org/p/DuV2LWH | gpg --verify
</code></pre>

<h3>Putting your key online</h3>

<p>There are three ways of putting your public key online:</p>

<h4>1. Using a key server</h4>

<p>One popular keyserver is the <a href="http://pgp.mit.edu/">MIT PGP Public Key Server</a>.
Paste your ASCII armored public key in the text box and press &ldquo;Submit&rdquo;.</p>

<p>You can search for keys using GnuPG:</p>

<pre><code class="language-bash">gpg --search-keys tudurom
</code></pre>

<h4>2. Uploading the key on your website</h4>

<p>I&rsquo;m pretty sure you know how to upload files to your webserver.</p>

<h4>3. Using other services (example: Keybase)</h4>

<p><a href="https://keybase.io">Keybase</a> is a service that maps your identity to your
public keys, and vice versa.</p>

<p>On Keybase you can send your public key(s) and map them to different online
services like Facebook, Twitter, Reddit or GitHub. This way your keys are more
trustworthy.</p>

<p>I&rsquo;m <a href="https://keybase.io/tudurom/">@tudurom</a> on Keybase.</p>

<h3>Conclusion</h3>

<p>GPG is a very powerful and useful tool that allows us to sign and encrypt
files cryptographically from trusted people. Cryptography has become very
important to our lives, carrying the confidence found in our physical world to
the electronic world. As such, knowledge on how to use a cryptographic
program like GnuPG can be very useful to the computer user.</p>

<p>I hope that you learned something useful from this article. Happy hacking!</p>
    </div>
</div>
            <hr />
            <a href="/" id="back_link">Root</a>
        </main>
    </body>
</html>
