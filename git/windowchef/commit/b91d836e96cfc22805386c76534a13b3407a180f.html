<!DOCTYPE html>
<html dir="ltr" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta http-equiv="Content-Language" content="en" />
<title>sloppy focus flag in config.h and license-related changes - windowchef - windowchef is a stacking window cooker controlled by a remote control program, waitron
</title>
<link rel="icon" type="image/png" href="../favicon.png" />
<link rel="alternate" type="application/atom+xml" title="windowchef.git Atom Feed" href="../atom.xml" />
<link rel="stylesheet" type="text/css" href="../style.css" />
</head>
<body>
<table><tr><td><a href="../../"><img src="../logo.png" alt="" width="32" height="32" /></a></td><td><h1>windowchef</h1><span class="desc">windowchef is a stacking window cooker controlled by a remote control program, waitron
</span></td></tr><tr class="url"><td></td><td>git clone <a href="git://thetudor.ddns.net/windowchef.git">git://thetudor.ddns.net/windowchef.git</a></td></tr><tr><td></td><td>
<a href="../log.html">Log</a> | <a href="../files.html">Files</a> | <a href="../refs.html">Refs</a> | <a href="../file/LICENSE.html">LICENSE</a></td></tr></table>
<hr/>
<div id="content">
<pre><b>commit</b> <a href="../commit/b91d836e96cfc22805386c76534a13b3407a180f.html">b91d836e96cfc22805386c76534a13b3407a180f</a>
<b>parent</b> <a href="../commit/7e76b1b0449adb8c0aacd58fb1854f36008e2368.html">7e76b1b0449adb8c0aacd58fb1854f36008e2368</a>
<b>Author:</b> Tudor &lt;<a href="mailto:xenogenesis@openmailbox.org">xenogenesis@openmailbox.org</a>&gt;
<b>Date:</b>   Sat Sep  3 13:09:19 +0300

sloppy focus flag in config.h and license-related changes

<b>Diffstat:</b>
<table><tr><td><a href="#h0">.gitignore</a></td><td> | </td><td class="num">3</td><td><span class="i">+++</span><span class="d"></span></td></tr>
<tr><td><a href="#h1">BUGS</a></td><td> | </td><td class="num">1</td><td><span class="i">+</span><span class="d"></span></td></tr>
<tr><td><a href="#h2">LICENSE</a></td><td> | </td><td class="num">4</td><td><span class="i">++</span><span class="d">--</span></td></tr>
<tr><td><a href="#h3">Makefile</a></td><td> | </td><td class="num">2</td><td><span class="i">+</span><span class="d">-</span></td></tr>
<tr><td><a href="#h4">client.c</a></td><td> | </td><td class="num">2</td><td><span class="i">++</span><span class="d"></span></td></tr>
<tr><td><a href="#h5">common.h</a></td><td> | </td><td class="num">4</td><td><span class="i">+++</span><span class="d">-</span></td></tr>
<tr><td><a href="#h6">config.h</a></td><td> | </td><td class="num">3</td><td><span class="i">+++</span><span class="d"></span></td></tr>
<tr><td><a href="#h7">config.mk</a></td><td> | </td><td class="num">2</td><td><span class="i">+</span><span class="d">-</span></td></tr>
<tr><td><a href="#h8">ipc.h</a></td><td> | </td><td class="num">2</td><td><span class="i">++</span><span class="d"></span></td></tr>
<tr><td><a href="#h9">list.c</a></td><td> | </td><td class="num">2</td><td><span class="i">++</span><span class="d"></span></td></tr>
<tr><td><a href="#h10">list.h</a></td><td> | </td><td class="num">2</td><td><span class="i">++</span><span class="d"></span></td></tr>
<tr><td><a href="#h11">types.h</a></td><td> | </td><td class="num">3</td><td><span class="i">+++</span><span class="d"></span></td></tr>
<tr><td><a href="#h12">wm.c</a></td><td> | </td><td class="num">9</td><td><span class="i">++++++++</span><span class="d">-</span></td></tr>
</table>13 files changed, 33 insertions(+), 6 deletions(-)
<hr/><b>diff --git a/<a id="h0" href="../file/.gitignore.html">.gitignore</a> b/<a href="../file/.gitignore.html">.gitignore</a></b>
<a href="#h0-0" id="h0-0" class="h">@@ -0,0 +1,3 @@
</a><a href="#h0-0-0" id="h0-0-0" class="i">+*.o
</a><a href="#h0-0-1" id="h0-0-1" class="i">+windowchef
</a><a href="#h0-0-2" id="h0-0-2" class="i">+waitron
</a><b>diff --git a/<a id="h1" href="../file/BUGS.html">BUGS</a> b/<a href="../file/BUGS.html">BUGS</a></b>
<a href="#h1-0" id="h1-0" class="h">@@ -0,0 +1 @@
</a><a href="#h1-0-0" id="h1-0-0" class="i">+- If compiled with -O2 fullscreen does not work as expected.
</a><b>diff --git a/<a id="h2" href="../file/LICENSE.html">LICENSE</a> b/<a href="../file/LICENSE.html">LICENSE</a></b>
<a href="#h2-0" id="h2-0" class="h">@@ -7,9 +7,9 @@ any purpose with or without fee is hereby granted, provided that the
</a> above copyright notice and this permission notice appear in all
 copies.
 
<a href="#h2-0-3" id="h2-0-3" class="d">-THE SOFTWARE IS PROVIDED &quot;AS IS&quot; AND ISC DISCLAIMS ALL WARRANTIES WITH
</a><a href="#h2-0-4" id="h2-0-4" class="i">+THE SOFTWARE IS PROVIDED &quot;AS IS&quot; AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
</a> REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
<a href="#h2-0-6" id="h2-0-6" class="d">-MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL ISC BE LIABLE FOR ANY
</a><a href="#h2-0-7" id="h2-0-7" class="i">+MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY
</a> SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT
<b>diff --git a/<a id="h3" href="../file/Makefile.html">Makefile</a> b/<a href="../file/Makefile.html">Makefile</a></b>
<a href="#h3-0" id="h3-0" class="h">@@ -8,7 +8,7 @@ NAME_DEFINES = -D__NAME__=\&quot;$(__NAME__)\&quot; \
</a> SRC = list.c wm.c client.c
 OBJ = $(SRC:.c=.o)
 BIN = $(__NAME__) $(__NAME_CLIENT__)
<a href="#h3-0-3" id="h3-0-3" class="d">-CFLAGS += $(NAME_DEFINES) -DD
</a><a href="#h3-0-4" id="h3-0-4" class="i">+CFLAGS += $(NAME_DEFINES)
</a> 
 all: $(BIN)
 
<b>diff --git a/<a id="h4" href="../file/client.c.html">client.c</a> b/<a href="../file/client.c.html">client.c</a></b>
<a href="#h4-0" id="h4-0" class="h">@@ -1,3 +1,5 @@
</a><a href="#h4-0-0" id="h4-0-0" class="i">+/* See the LICENSE file for copyright and license details. */
</a><a href="#h4-0-1" id="h4-0-1" class="i">+
</a> #include &lt;stdio.h&gt;
 #include &lt;stdlib.h&gt;
 #include &lt;string.h&gt;
<b>diff --git a/<a id="h5" href="../file/common.h.html">common.h</a> b/<a href="../file/common.h.html">common.h</a></b>
<a href="#h5-0" id="h5-0" class="h">@@ -1,10 +1,12 @@
</a><a href="#h5-0-0" id="h5-0-0" class="i">+/* See the LICENSE file for copyright and license details. */
</a><a href="#h5-0-1" id="h5-0-1" class="i">+
</a> #ifndef _COMMON_H
 #define _COMMON_H
 
 #ifdef D
 #define DMSG(fmt, ...) fprintf(stderr, fmt, ##__VA_ARGS__)
 #else
<a href="#h5-0-8" id="h5-0-8" class="d">-#define DMSG
</a><a href="#h5-0-9" id="h5-0-9" class="i">+#define DMSG(fmt, ...)
</a> #endif
 
 #endif
<b>diff --git a/<a id="h6" href="../file/config.h.html">config.h</a> b/<a href="../file/config.h.html">config.h</a></b>
<a href="#h6-0" id="h6-0" class="h">@@ -1,3 +1,5 @@
</a><a href="#h6-0-0" id="h6-0-0" class="i">+/* See the LICENSE file for copyright and license details. */
</a><a href="#h6-0-1" id="h6-0-1" class="i">+
</a> #ifndef _CONFIG_H
 #define _CONFIG_H
 
<a href="#h6-1" id="h6-1" class="h">@@ -7,5 +9,6 @@
</a> #define GAP 20
 #define CURSOR_POSITION CENTER
 #define GROUPS 4
<a href="#h6-1-3" id="h6-1-3" class="i">+#define SLOPPY_FOCUS true
</a> 
 #endif
<b>diff --git a/<a id="h7" href="../file/config.mk.html">config.mk</a> b/<a href="../file/config.mk.html">config.mk</a></b>
<a href="#h7-0" id="h7-0" class="h">@@ -2,5 +2,5 @@ PREFIX = /usr/local
</a> MANPREFIX = /usr/local/share
 MANDIR = $(MANPREFIX)/man/man1
 
<a href="#h7-0-3" id="h7-0-3" class="d">-CFLAGS += -std=c99 -Wextra -g
</a><a href="#h7-0-4" id="h7-0-4" class="i">+CFLAGS += -std=c99 -Wextra
</a> LDFLAGS += -lxcb -lxcb-ewmh -lxcb-icccm -lxcb-randr
<b>diff --git a/<a id="h8" href="../file/ipc.h.html">ipc.h</a> b/<a href="../file/ipc.h.html">ipc.h</a></b>
<a href="#h8-0" id="h8-0" class="h">@@ -1,3 +1,5 @@
</a><a href="#h8-0-0" id="h8-0-0" class="i">+/* See the LICENSE file for copyright and license details. */
</a><a href="#h8-0-1" id="h8-0-1" class="i">+
</a> #ifndef _WM_IPC_H
 #define _WM_IPC_H
 
<b>diff --git a/<a id="h9" href="../file/list.c.html">list.c</a> b/<a href="../file/list.c.html">list.c</a></b>
<a href="#h9-0" id="h9-0" class="h">@@ -1,3 +1,5 @@
</a><a href="#h9-0-0" id="h9-0-0" class="i">+/* See the LICENSE file for copyright and license details. */
</a><a href="#h9-0-1" id="h9-0-1" class="i">+
</a> #include &lt;stdlib.h&gt;
 
 #include &quot;list.h&quot;
<b>diff --git a/<a id="h10" href="../file/list.h.html">list.h</a> b/<a href="../file/list.h.html">list.h</a></b>
<a href="#h10-0" id="h10-0" class="h">@@ -1,3 +1,5 @@
</a><a href="#h10-0-0" id="h10-0-0" class="i">+/* See the LICENSE file for copyright and license details. */
</a><a href="#h10-0-1" id="h10-0-1" class="i">+
</a> #ifndef _LIST_H
 #define _LIST_H
 
<b>diff --git a/<a id="h11" href="../file/types.h.html">types.h</a> b/<a href="../file/types.h.html">types.h</a></b>
<a href="#h11-0" id="h11-0" class="h">@@ -1,3 +1,5 @@
</a><a href="#h11-0-0" id="h11-0-0" class="i">+/* See the LICENSE file for copyright and license details. */
</a><a href="#h11-0-1" id="h11-0-1" class="i">+
</a> #ifndef _TYPES_H
 #define _TYPES_H
 
<a href="#h11-1" id="h11-1" class="h">@@ -41,6 +43,7 @@ struct conf {
</a>     uint32_t focus_color, unfocus_color;
     enum cursor_position cursor_position;
     uint32_t groups;
<a href="#h11-1-3" id="h11-1-3" class="i">+    bool sloppy_focus;
</a> };
 
 #endif
<b>diff --git a/<a id="h12" href="../file/wm.c.html">wm.c</a> b/<a href="../file/wm.c.html">wm.c</a></b>
<a href="#h12-0" id="h12-0" class="h">@@ -1,3 +1,5 @@
</a><a href="#h12-0-0" id="h12-0-0" class="i">+/* See the LICENSE file for copyright and license details. */
</a><a href="#h12-0-1" id="h12-0-1" class="i">+
</a> #include &lt;xcb/xcb.h&gt;
 #include &lt;xcb/xcb_icccm.h&gt;
 #include &lt;xcb/xcb_ewmh.h&gt;
<a href="#h12-1" id="h12-1" class="h">@@ -218,6 +220,7 @@ setup(void)
</a> 	conf.gap             = GAP;
 	conf.cursor_position = CURSOR_POSITION;
 	conf.groups          = GROUPS;
<a href="#h12-1-3" id="h12-1-3" class="i">+	conf.sloppy_focus    = SLOPPY_FOCUS;
</a> 
 	group_in_use = malloc(conf.groups * sizeof(bool));
 	for (uint32_t i = 0; i &lt; conf.groups; i++)
<a href="#h12-2" id="h12-2" class="h">@@ -1434,6 +1437,8 @@ event_enter_notify(xcb_generic_event_t *ev)
</a> 	xcb_enter_notify_event_t *e = (xcb_enter_notify_event_t *)ev;
 	struct client *client;
 
<a href="#h12-2-3" id="h12-2-3" class="i">+	if (conf.sloppy_focus == false)
</a><a href="#h12-2-4" id="h12-2-4" class="i">+		return;
</a> 	if (e-&gt;mode == XCB_NOTIFY_MODE_NORMAL ||
 			e-&gt;mode == XCB_NOTIFY_MODE_UNGRAB) {
 		if (focused_win != NULL &amp;&amp; e-&gt;event == focused_win-&gt;window)
<a href="#h12-3" id="h12-3" class="h">@@ -1501,8 +1506,10 @@ event_map_notify(xcb_generic_event_t *ev)
</a> 	xcb_map_notify_event_t *e = (xcb_map_notify_event_t *)ev;
 	struct client *client = find_client(&amp;e-&gt;window);
 
<a href="#h12-3-3" id="h12-3-3" class="d">-	if (client != NULL)
</a><a href="#h12-3-4" id="h12-3-4" class="i">+	if (client != NULL) {
</a> 		client-&gt;mapped = true;
<a href="#h12-3-6" id="h12-3-6" class="i">+		set_focused(client);
</a><a href="#h12-3-7" id="h12-3-7" class="i">+	}
</a> }
 
 /*
</pre>
</div>
</body>
</html>
