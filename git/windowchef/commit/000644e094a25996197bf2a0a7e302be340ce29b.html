<!DOCTYPE html>
<html dir="ltr" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta http-equiv="Content-Language" content="en" />
<title>removed ipc command wm_change_nr_of_groups and fixed the groups_nr config option - windowchef - windowchef is a stacking window cooker controlled by a remote control program, waitron
</title>
<link rel="icon" type="image/png" href="../favicon.png" />
<link rel="alternate" type="application/atom+xml" title="windowchef.git Atom Feed" href="../atom.xml" />
<link rel="stylesheet" type="text/css" href="../style.css" />
</head>
<body>
<table><tr><td><a href="../../"><img src="../logo.png" alt="" width="32" height="32" /></a></td><td><h1>windowchef</h1><span class="desc">windowchef is a stacking window cooker controlled by a remote control program, waitron
</span></td></tr><tr class="url"><td></td><td>git clone <a href="git://thetudor.ddns.net/windowchef.git">git://thetudor.ddns.net/windowchef.git</a></td></tr><tr><td></td><td>
<a href="../log.html">Log</a> | <a href="../files.html">Files</a> | <a href="../refs.html">Refs</a> | <a href="../file/LICENSE.html">LICENSE</a></td></tr></table>
<hr/>
<div id="content">
<pre><b>commit</b> <a href="../commit/000644e094a25996197bf2a0a7e302be340ce29b.html">000644e094a25996197bf2a0a7e302be340ce29b</a>
<b>parent</b> <a href="../commit/baaeeb8d21568e2bd2887702054d5f19aa803bcb.html">baaeeb8d21568e2bd2887702054d5f19aa803bcb</a>
<b>Author:</b> Tudor &lt;<a href="mailto:xenogenesis@openmailbox.org">xenogenesis@openmailbox.org</a>&gt;
<b>Date:</b>   Wed Sep 28 21:56:22 +0300

removed ipc command wm_change_nr_of_groups and fixed the groups_nr config option

<b>Diffstat:</b>
<table><tr><td><a href="#h0">client.c</a></td><td> | </td><td class="num">1</td><td><span class="i"></span><span class="d">-</span></td></tr>
<tr><td><a href="#h1">ipc.h</a></td><td> | </td><td class="num">1</td><td><span class="i"></span><span class="d">-</span></td></tr>
<tr><td><a href="#h2">wm.c</a></td><td> | </td><td class="num">16</td><td><span class="i">+++</span><span class="d">-------------</span></td></tr>
<tr><td><a href="#h3">xephyr.sh</a></td><td> | </td><td class="num">2</td><td><span class="i">+</span><span class="d">-</span></td></tr>
</table>4 files changed, 4 insertions(+), 16 deletions(-)
<hr/><b>diff --git a/<a id="h0" href="../file/client.c.html">client.c</a> b/<a href="../file/client.c.html">client.c</a></b>
<a href="#h0-0" id="h0-0" class="h">@@ -57,7 +57,6 @@ static struct Command c[] = {
</a> 	{ &quot;group_deactivate&quot;       , IPCGroupDeactivate      ,  1 , fn_naturals } ,
 	{ &quot;group_toggle&quot;           , IPCGroupToggle          ,  1 , fn_naturals } ,
 	{ &quot;wm_quit&quot;                , IPCWMQuit               ,  1 , fn_naturals } ,
<a href="#h0-0-3" id="h0-0-3" class="d">-	{ &quot;wm_change_nr_of_groups&quot; , IPCWMChangeNrOfGroups   ,  1 , fn_naturals } ,
</a> 	{ &quot;wm_config&quot;              , IPCWMConfig             ,  2 , fn_config   },
 };
 
<b>diff --git a/<a id="h1" href="../file/ipc.h.html">ipc.h</a> b/<a href="../file/ipc.h.html">ipc.h</a></b>
<a href="#h1-0" id="h1-0" class="h">@@ -28,7 +28,6 @@ enum IPCCommand {
</a> 	IPCGroupDeactivate,
 	IPCGroupToggle,
 	IPCWMQuit,
<a href="#h1-0-3" id="h1-0-3" class="d">-	IPCWMChangeNrOfGroups,
</a> 	IPCWMConfig,
 	NR_IPC_COMMANDS
 };
<b>diff --git a/<a id="h2" href="../file/wm.c.html">wm.c</a> b/<a href="../file/wm.c.html">wm.c</a></b>
<a href="#h2-0" id="h2-0" class="h">@@ -136,7 +136,6 @@ static void ipc_group_activate(uint32_t *);
</a> static void ipc_group_deactivate(uint32_t *);
 static void ipc_group_toggle(uint32_t *);
 static void ipc_wm_quit(uint32_t *);
<a href="#h2-0-3" id="h2-0-3" class="d">-static void ipc_wm_change_nr_of_groups(uint32_t *);
</a> static void ipc_wm_config(uint32_t *);
 
 static void usage(char *);
<a href="#h2-1" id="h2-1" class="h">@@ -1349,13 +1348,10 @@ change_nr_of_groups(uint32_t groups)
</a> 	for (uint32_t i = 0; i &lt; until; i++)
 		copy[i] = group_in_use[i];
 
<a href="#h2-1-3" id="h2-1-3" class="d">-	free(group_in_use);
</a><a href="#h2-1-4" id="h2-1-4" class="d">-	group_in_use = copy;
</a><a href="#h2-1-5" id="h2-1-5" class="d">-
</a> 	if (groups &lt; conf.groups)
 		for (item = win_list; item != NULL; item = item-&gt;next) {
 			client = item-&gt;data;
<a href="#h2-1-9" id="h2-1-9" class="d">-			if (client-&gt;group &gt;= groups) {
</a><a href="#h2-1-10" id="h2-1-10" class="i">+			if (client-&gt;group != NULL_GROUP &amp;&amp; client-&gt;group &gt;= groups) {
</a> 				group_activate(client-&gt;group);
 				client-&gt;group = NULL_GROUP;
 				update_wm_desktop(client);
<a href="#h2-2" id="h2-2" class="h">@@ -1363,7 +1359,8 @@ change_nr_of_groups(uint32_t groups)
</a> 		}
 
 	conf.groups = groups;
<a href="#h2-2-3" id="h2-2-3" class="d">-
</a><a href="#h2-2-4" id="h2-2-4" class="i">+	free(group_in_use);
</a><a href="#h2-2-5" id="h2-2-5" class="i">+	group_in_use = copy;
</a> }
 /*
  * Adds X event handlers to the array.
<a href="#h2-3" id="h2-3" class="h">@@ -1766,7 +1763,6 @@ register_ipc_handlers(void)
</a> 	ipc_handlers[IPCGroupDeactivate]      = ipc_group_deactivate;
 	ipc_handlers[IPCGroupToggle]          = ipc_group_toggle;
 	ipc_handlers[IPCWMQuit]               = ipc_wm_quit;
<a href="#h2-3-3" id="h2-3-3" class="d">-	ipc_handlers[IPCWMChangeNrOfGroups]   = ipc_wm_change_nr_of_groups;
</a> 	ipc_handlers[IPCWMConfig]             = ipc_wm_config;
 }
 
<a href="#h2-4" id="h2-4" class="h">@@ -2133,12 +2129,6 @@ ipc_wm_quit(uint32_t *d)
</a> }
 
 static void
<a href="#h2-4-3" id="h2-4-3" class="d">-ipc_wm_change_nr_of_groups(uint32_t *d)
</a><a href="#h2-4-4" id="h2-4-4" class="d">-{
</a><a href="#h2-4-5" id="h2-4-5" class="d">-	change_nr_of_groups(d[0]);
</a><a href="#h2-4-6" id="h2-4-6" class="d">-}
</a><a href="#h2-4-7" id="h2-4-7" class="d">-
</a><a href="#h2-4-8" id="h2-4-8" class="d">-static void
</a> ipc_wm_config(uint32_t *d)
 {
 	enum IPCConfig key;
<b>diff --git a/<a id="h3" href="../file/xephyr.sh.html">xephyr.sh</a> b/<a href="../file/xephyr.sh.html">xephyr.sh</a></b>
<a href="#h3-0" id="h3-0" class="h">@@ -7,4 +7,4 @@ sleep 1
</a> 
 export DISPLAY=:$D
 sxhkd -c .sxhkdrc &amp;
<a href="#h3-0-3" id="h3-0-3" class="d">-exec ./windowchef
</a><a href="#h3-0-4" id="h3-0-4" class="i">+exec ./windowchef -c windowchefrc
</a></pre>
</div>
</body>
</html>
