<!DOCTYPE html>
<html dir="ltr" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta http-equiv="Content-Language" content="en" />
<title>pre-initalizing board&apos;s borders for faster fill - glenda - Program that plays the Flood Wars game for a contest.
</title>
<link rel="icon" type="image/png" href="../favicon.png" />
<link rel="alternate" type="application/atom+xml" title="glenda.git Atom Feed" href="../atom.xml" />
<link rel="stylesheet" type="text/css" href="../style.css" />
</head>
<body>
<table><tr><td><a href="../../"><img src="../logo.png" alt="" width="32" height="32" /></a></td><td><h1>glenda</h1><span class="desc">Program that plays the Flood Wars game for a contest.
</span></td></tr><tr class="url"><td></td><td>git clone <a href="git://thetudor.ddns.net/glenda.git">git://thetudor.ddns.net/glenda.git</a></td></tr><tr><td></td><td>
<a href="../log.html">Log</a> | <a href="../files.html">Files</a> | <a href="../refs.html">Refs</a> | <a href="../file/LICENSE.html">LICENSE</a></td></tr></table>
<hr/>
<div id="content">
<pre><b>commit</b> <a href="../commit/d9f66a3731a3136e0da2f0d45825335dd4fbee89.html">d9f66a3731a3136e0da2f0d45825335dd4fbee89</a>
<b>parent</b> <a href="../commit/1319ef468452f9d840d07de344ee18a07560e804.html">1319ef468452f9d840d07de344ee18a07560e804</a>
<b>Author:</b> Tudor &lt;<a href="mailto:xenogenesis@openmailbox.org">xenogenesis@openmailbox.org</a>&gt;
<b>Date:</b>   Thu May 26 21:26:00 +0300

pre-initalizing board&apos;s borders for faster fill

<b>Diffstat:</b>
<table><tr><td><a href="#h0">glenda</a></td><td> | </td><td class="num">0</td><td><span class="i"></span><span class="d"></span></td></tr>
<tr><td><a href="#h1">glenda.c</a></td><td> | </td><td class="num">39</td><td><span class="i">++++++++++++++++++++++++++</span><span class="d">-------------</span></td></tr>
<tr><td><a href="#h2">glenda.in</a></td><td> | </td><td class="num">4</td><td><span class="i">++++</span><span class="d"></span></td></tr>
<tr><td><a href="#h3">glenda.out</a></td><td> | </td><td class="num">4</td><td><span class="i">++++</span><span class="d"></span></td></tr>
</table>4 files changed, 34 insertions(+), 13 deletions(-)
<hr/><b>diff --git a/<a id="h0" href="../file/glenda.html">glenda</a> b/<a href="../file/glenda.html">glenda</a></b>
Binary files differ.
<b>diff --git a/<a id="h1" href="../file/glenda.c.html">glenda.c</a> b/<a href="../file/glenda.c.html">glenda.c</a></b>
<a href="#h1-0" id="h1-0" class="h">@@ -46,23 +46,35 @@ http://glenda.cat-v.org/
</a> /* Player values. S is up (sus) and J is down (jos) */
 #define S -1
 #define J 1
<a href="#h1-0-3" id="h1-0-3" class="i">+#define B(lin, col) board[lin + 1][col + 1]
</a> 
 typedef char color;
 
<a href="#h1-0-7" id="h1-0-7" class="d">-color board[MAX_H][MAX_W];
</a><a href="#h1-0-8" id="h1-0-8" class="i">+color board[1 + MAX_H + 1][1 + MAX_W + 1];
</a> color colors[] = {&apos;@&apos;, &apos;#&apos;, &apos;+&apos;, &apos;.&apos;, &apos;*&apos;};
 color player;
 
<a href="#h1-0-12" id="h1-0-12" class="i">+inline void init_board(int lin, int col, color (*board)[MAX_W + 2]) {
</a><a href="#h1-0-13" id="h1-0-13" class="i">+    int i, j;
</a><a href="#h1-0-14" id="h1-0-14" class="i">+    for (i = 0; i &lt;= 1; i++)
</a><a href="#h1-0-15" id="h1-0-15" class="i">+        for (j = 0; j &lt; col + 2; j++)
</a><a href="#h1-0-16" id="h1-0-16" class="i">+            board[i * (lin + 2 - 1)][j] = -1;
</a><a href="#h1-0-17" id="h1-0-17" class="i">+
</a><a href="#h1-0-18" id="h1-0-18" class="i">+    for (j = 0; j &lt;= 1; j++)
</a><a href="#h1-0-19" id="h1-0-19" class="i">+        for (i = 0; i &lt; lin + 2; i++)
</a><a href="#h1-0-20" id="h1-0-20" class="i">+            board[i][j * (col + 2 - 1)] = -1;
</a><a href="#h1-0-21" id="h1-0-21" class="i">+}
</a><a href="#h1-0-22" id="h1-0-22" class="i">+
</a> /* Flood fill old color with new one */
 void fill(int lin, int col, int n, int m, color old, color new) {
<a href="#h1-0-25" id="h1-0-25" class="d">-    board[lin][col] = new;
</a><a href="#h1-0-26" id="h1-0-26" class="d">-    if (lin &gt; 0     &amp;&amp; board[lin - 1][col] == old)
</a><a href="#h1-0-27" id="h1-0-27" class="i">+    B(lin, col) = new;
</a><a href="#h1-0-28" id="h1-0-28" class="i">+    if (B(lin - 1, col) == old)
</a>         fill(lin - 1, col, n, m, old, new);
<a href="#h1-0-30" id="h1-0-30" class="d">-    if (lin &lt; n - 1 &amp;&amp; board[lin + 1][col] == old)
</a><a href="#h1-0-31" id="h1-0-31" class="i">+    if (B(lin + 1, col) == old)
</a>         fill(lin + 1, col, n, m, old, new);
<a href="#h1-0-33" id="h1-0-33" class="d">-    if (col &gt; 0     &amp;&amp; board[lin][col - 1] == old)
</a><a href="#h1-0-34" id="h1-0-34" class="i">+    if (B(lin, col - 1) == old)
</a>         fill(lin, col - 1, n, m, old, new);
<a href="#h1-0-36" id="h1-0-36" class="d">-    if (col &lt; m - 1 &amp;&amp; board[lin][col + 1] == old)
</a><a href="#h1-0-37" id="h1-0-37" class="i">+    if (B(lin, col + 1) == old)
</a>         fill(lin, col + 1, n, m, old, new);
 }
 
<a href="#h1-1" id="h1-1" class="h">@@ -96,19 +108,20 @@ int main() {
</a>             lin++;
             col = 0;
         } else {
<a href="#h1-1-3" id="h1-1-3" class="d">-            board[lin][col] = c;
</a><a href="#h1-1-4" id="h1-1-4" class="i">+            B(lin, col) = c;
</a>             col++;
         }
         c = fgetc(stdin);
     }
     n = lin;
     if (player == J) {
<a href="#h1-1-11" id="h1-1-11" class="d">-        me = board[n - 1][0];
</a><a href="#h1-1-12" id="h1-1-12" class="d">-        op = board[0][m - 1];
</a><a href="#h1-1-13" id="h1-1-13" class="i">+        me = B(n - 1, 0);
</a><a href="#h1-1-14" id="h1-1-14" class="i">+        op = B(0, m - 1);
</a>     } else {
<a href="#h1-1-16" id="h1-1-16" class="d">-        me = board[0][m - 1];
</a><a href="#h1-1-17" id="h1-1-17" class="d">-        op = board[n - 1][0];
</a><a href="#h1-1-18" id="h1-1-18" class="i">+        me = B(0, m - 1);
</a><a href="#h1-1-19" id="h1-1-19" class="i">+        op = B(n - 1, 0);
</a>     }
<a href="#h1-1-21" id="h1-1-21" class="i">+    init_board(n, m, board);
</a> 
     /* Remove colors used by the player and the opponent */
     for (i = 0; i &lt; N_COL; i++) {
<a href="#h1-2" id="h1-2" class="h">@@ -130,7 +143,7 @@ int main() {
</a>         lin = n - 1;
         col = 0;
     }
<a href="#h1-2-3" id="h1-2-3" class="d">-    fill(lin, col, n, m, board[lin][col], colors[pos]);
</a><a href="#h1-2-4" id="h1-2-4" class="i">+    fill(lin, col, n, m, B(lin, col), colors[pos]);
</a> 
     /* print the board */
     if (player == J)
<a href="#h1-3" id="h1-3" class="h">@@ -140,7 +153,7 @@ int main() {
</a>     fputc(&apos;\n&apos;, stdout);
     for (lin = 0; lin &lt; n; lin++) {
         for (col = 0; col &lt; m; col++)
<a href="#h1-3-3" id="h1-3-3" class="d">-            fputc(board[lin][col], stdout);
</a><a href="#h1-3-4" id="h1-3-4" class="i">+            fputc(B(lin, col), stdout);
</a>         fputc(&apos;\n&apos;, stdout);
     }
 
<b>diff --git a/<a id="h2" href="../file/glenda.in.html">glenda.in</a> b/<a href="../file/glenda.in.html">glenda.in</a></b>
<a href="#h2-0" id="h2-0" class="h">@@ -0,0 +1,4 @@
</a><a href="#h2-0-0" id="h2-0-0" class="i">+J
</a><a href="#h2-0-1" id="h2-0-1" class="i">+...
</a><a href="#h2-0-2" id="h2-0-2" class="i">+#..
</a><a href="#h2-0-3" id="h2-0-3" class="i">+###
</a><b>diff --git a/<a id="h3" href="../file/glenda.out.html">glenda.out</a> b/<a href="../file/glenda.out.html">glenda.out</a></b>
<a href="#h3-0" id="h3-0" class="h">@@ -0,0 +1,4 @@
</a><a href="#h3-0-0" id="h3-0-0" class="i">+S
</a><a href="#h3-0-1" id="h3-0-1" class="i">+...
</a><a href="#h3-0-2" id="h3-0-2" class="i">++..
</a><a href="#h3-0-3" id="h3-0-3" class="i">++++
</a></pre>
</div>
</body>
</html>
